;; Comprehensive test of tensor-apply and tensor-reduce operations

(define (main)
  ;; Test with 1D vector
  (define v1 (vector 2 4 6))
  
  ;; Test tensor-apply with various functions
  (define v_doubled (tensor-apply v1 double))      ;; Should be [4, 8, 12]
  (define v_squared (tensor-apply v1 square))      ;; Should be [4, 16, 36]
  (define v_incremented (tensor-apply v1 increment)) ;; Should be [3, 5, 7]
  
  ;; Test tensor-reduce with various operations  
  (define sum_result (tensor-reduce v1 + 0))       ;; Should be 2+4+6 = 12
  (define product_result (tensor-reduce v1 * 1))   ;; Should be 2*4*6 = 48
  (define max_result (tensor-reduce v1 max 0))     ;; Should be max(0,2,4,6) = 6
  (define min_result (tensor-reduce v1 min 10))    ;; Should be min(10,2,4,6) = 2
  
  ;; Test with 2D matrix
  (define m1 (matrix 2 2 1 2 3 4))
  (define m_doubled (tensor-apply m1 double))      ;; Should double all elements
  (define m_sum (tensor-reduce m1 + 0))            ;; Should be 1+2+3+4 = 10
  
  ;; Return success
  0)